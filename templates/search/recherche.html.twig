{% extends 'base.html.twig' %}

{% block title %}Recherche - Les Restes{% endblock %}

{% block body %}
<div class="container" id="search-page-container" 
     data-selected="{{ selectedIngredients|map(i => i.id)|json_encode }}"
     data-search-url="{{ path('app_search') }}">

    <div class="hero-section text-center py-5 mb-5">
        <h1 class="display-4 mb-4">Quels ingrédients avez-vous ?</h1>
        
        {{ include('partials/_icon_bol.html.twig') }}
        {{ include('partials/_ingredients_selector.html.twig') }}
        {{ include('partials/_search_bar_simple.html.twig') }}
    </div>

    {% if recettes.getTotalItemCount > 0 %}
        <h2 class="mb-4 text-center">Résultats ({{ recettes.getTotalItemCount }})</h2>
        <div class="row">
            {% for recette in recettes %}
                <div class="col-md-6 col-lg-4 mb-4">
                    {{ include('recette/partials/_recipe_card.html.twig', {
                        'recette': recette,
                        'selectedIngredients': selectedIngredients
                    }) }}
                </div>
            {% endfor %}
        </div>
        <div class="d-flex justify-content-center mt-4">
            {{ knp_pagination_render(recettes) }}
        </div>
    {% elseif selectedIngredients|length > 0 or app.request.query.get('q') %}
        <div class="alert alert-info text-center">Aucune recette trouvée.</div>
    {% endif %}
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('search_ingredients') }}
{% endblock %}