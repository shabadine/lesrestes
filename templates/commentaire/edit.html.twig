{% extends 'base.html.twig' %}

{% block title %}Modifier mon commentaire{% endblock %}

{% block body %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h1 class="h3 mb-4 text-success">Modifier mon avis</h1>
            
            <div class="card shadow-sm border-success p-4">
                {{ form_start(form) }}
                    <div class="mb-3">
                        {{ form_label(form.contenu, 'Votre message') }}
                        {{ form_widget(form.contenu, {'attr': {'class': 'form-control', 'rows': 3}}) }}
                    </div>

                    <div class="mb-3">
                        <label class="form-label h6">Votre note :</label>
                        <div class="star-rating d-flex gap-1 flex-wrap" role="radiogroup">
                            {% for i in 1..5 %}
                                <input type="radio" 
                                    class="btn-check" 
                                    name="{{ form.note.vars.full_name }}" 
                                    id="note{{ i }}" 
                                    value="{{ i }}"
                                    {% if form.note.vars.value == i %}checked{% endif %}
                                    required>
                                <label class="btn btn-outline-warning" for="note{{ i }}" title="Noter {{ i }} sur 5">
                                    <i class="bi bi-star-fill" aria-hidden="true"></i>
                                    <span class="d-none d-sm-inline" aria-hidden="true">{{ i }}</span>
                                </label>
                            {% endfor %}
                        </div>
                        {# EmpÃªche l'affichage automatique du champ note par Symfony #}
                        {% do form.note.setRendered %}
                    </div>

                    <div class="mt-3">
                        <button type="submit" class="btn btn-success">Enregistrer les modifications</button>
                        <a href="{{ path('app_recette_show', {id: commentaire.recette.id}) }}" class="btn btn-light">Annuler</a>
                    </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
</div>
{% endblock %}